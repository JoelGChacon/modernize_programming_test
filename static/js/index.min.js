const form=document.getElementById("contact-info"),user=document.getElementById("name"),phone=document.getElementById("phone"),email=document.getElementById("email"),button=document.getElementById("form__btn");user.addEventListener("input",(e=>nameInput(e))),user.addEventListener("blur",(e=>nameBlur(e))),phone.addEventListener("input",(e=>phoneInput(e))),phone.addEventListener("blur",(e=>phoneBlur(e))),email.addEventListener("input",(e=>emailInput(e))),email.addEventListener("blur",(e=>emailBlur(e)));const formValidationConfig={name:!1,phone:!1,email:!1};function nameInput(e){e.target.value.length>2&&(formValidationConfig.name=!0,user.classList.remove("error"))}function nameBlur(e){e.target.value.length>2?(formValidationConfig.name=!0,user.classList.remove("error")):(formValidationConfig.name=!1,user.classList.add("error"))}function phoneInput(e){const t=e.target.value.search(/\(\d{3}\)\s\d{3}-\d{4}/),n=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value=n[2]?"("+n[1]+") "+n[2]+(n[3]?"-"+n[3]:""):n[1],-1!==t&&(formValidationConfig.phone=!0,phone.classList.remove("error"))}function phoneBlur(e){-1!==e.target.value.search(/\(\d{3}\)\s\d{3}-\d{4}/)?(formValidationConfig.phone=!0,phone.classList.remove("error")):(formValidationConfig.phone=!1,phone.classList.add("error"))}function emailInput(e){-1!==e.target.value.search(/^\S+@\S+\.\S+$/)&&(formValidationConfig.email=!0,email.classList.remove("error"))}function emailBlur(e){-1!==e.target.value.search(/^\S+@\S+\.\S+$/)?(formValidationConfig.email=!0,email.classList.remove("error")):(formValidationConfig.email=!1,email.classList.add("error"))}form.addEventListener("submit",(async e=>{if(e.preventDefault(),Object.values(formValidationConfig).every((e=>e)))try{button.innerHTML="SUBMITTING",button.setAttribute("disabled",!0);const e={method:"post",body:new FormData(form)},t=await fetch("https://formsws-hilstaging-com-0adj9wt8gzyq.runscope.net/solar",e).then((e=>e.json()));console.log(t),form.reset(),button.innerHTML="SUBMITTED",button.setAttribute("disabled",!0)}catch(e){button.innerHTML="ENTER TO WIN",button.removeAttribute("disabled"),console.log(e)}else console.log("Info needed")}));