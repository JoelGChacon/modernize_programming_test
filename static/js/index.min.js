const form=document.getElementById("contact-info"),user=document.getElementById("name"),phone=document.getElementById("phone"),email=document.getElementById("email"),button=document.getElementById("form__btn");user.addEventListener("input",(e=>nameValidate(e))),user.addEventListener("blur",(e=>nameValidate(e))),phone.addEventListener("input",(e=>phoneValidate(e))),phone.addEventListener("blur",(e=>phoneValidate(e))),email.addEventListener("input",(e=>emailValidate(e))),email.addEventListener("blur",(e=>emailValidate(e)));const formValidationConfig={name:!1,phone:!1,email:!1};function nameValidate(e){const t=e.target.value.length>2;validationStylesHandler(user,t,"name",e.type)}function phoneValidate(e){const t=-1!==e.target.value.search(/\(\d{3}\)\s\d{3}-\d{4}/),n=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value=n[2]?"("+n[1]+") "+n[2]+(n[3]?"-"+n[3]:""):n[1],validationStylesHandler(phone,t,"phone",e.type)}function emailValidate(e){const t=-1!==e.target.value.search(/^\S+@\S+\.\S+$/);validationStylesHandler(email,t,"email",e.type)}function validationStylesHandler(e,t,n,a){console.log("type",a),t||"blur"!==a?t&&(formValidationConfig[n]=!0,e.classList.remove("error")):(formValidationConfig[n]=!1,e.classList.add("error"))}form.addEventListener("submit",(async e=>{if(e.preventDefault(),Object.values(formValidationConfig).every((e=>e)))try{button.innerHTML="SUBMITTING",button.setAttribute("disabled",!0);const e={method:"post",body:new FormData(form)},t=await fetch("https://formsws-hilstaging-com-0adj9wt8gzyq.runscope.net/solar",e).then((e=>e.json()));console.log(t),form.reset(),button.innerHTML="SUBMITTED",button.setAttribute("disabled",!0)}catch(e){button.innerHTML="ENTER TO WIN",button.removeAttribute("disabled"),console.log(e)}else console.log("Info needed")}));